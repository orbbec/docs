

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.1. Create Device &mdash; OrbbecSDK V2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=a2eacb60" />

  
    <link rel="shortcut icon" href="../../_static/orbbec_footerlogo_3d_world.svg"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4. License" href="../license.html" />
    <link rel="prev" title="3. Application Guide" href="Application_Guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            OrbbecSDK V2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_overview/overview.html">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/Introduction.html">1.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/SDKOverview.html">1.2. SDK  Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/SDKOverview.html#terms">1.2.1. Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/SDKOverview.html#orbbec-sdk-v2-architecture-overview">1.2.2. Orbbec SDK v2 Architecture Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/SDKOverview.html#sdk-concept-overview">1.2.3. SDK Concept Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/SDKOverview.html#sdk-programming-model">1.2.4. SDK Programming Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/EnvironmentSetup.html">1.3. Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/EnvironmentSetup.html#sdk-download">1.3.1. SDK Download</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/EnvironmentSetup.html#device-support-verification">1.3.2. Device Support Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/EnvironmentSetup.html#development-environment-configuration">1.3.3. Development Environment Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2_QuickStarts/QuickStarts.html">2. QuickStarts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2_QuickStarts/QuickStart.html">2.1. Quick Start on Windows Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_QuickStarts/QuickStart.html#quick-start-on-linux-platform">2.2. Quick Start on Linux Platform</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="Application_Guide.html">3. Application Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1. Create Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-pipeline">3.2. Create Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#obtain-the-sensor-list">3.3. Obtain the Sensor List</a></li>
<li class="toctree-l2"><a class="reference internal" href="#obtain-video-data-streams">3.4. Obtain Video Data Streams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#blocking-polling-mode">3.4.1. Blocking Polling Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-callback-mode">3.4.2. Asynchronous Callback Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#obtain-imu-data-streams">3.5. Obtain Imu Data Streams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.5.1. Blocking Polling Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.5.2. Asynchronous Callback Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#frame-aggregate">3.6. Frame Aggregate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d2c">3.7. D2C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware-d2c">3.7.1. Hardware D2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-d2c">3.7.2. Software D2C</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#software-c2d">3.8. Software C2D</a></li>
<li class="toctree-l2"><a class="reference internal" href="#depth-point-cloud">3.9. Depth Point Cloud</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synchronous-mode">3.9.1. Synchronous Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">3.9.2. Asynchronous Callback Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rgbd-point-cloud">3.10. RGBD Point Cloud</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">3.10.1. Synchronous Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">3.10.2. Asynchronous Callback Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#noise-removeal-filter">3.11. Noise Removeal Filter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware-noise-removeal-filter">3.11.1. Hardware Noise Removeal Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-noise-removeal-filter">3.11.2. Software Noise Removeal Filter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#depth-post-processing-filters">3.12. Depth Post-Processing Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recording-and-playback">3.13. Recording and Playback</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recording">3.13.1. Recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="#playback">3.13.2. Playback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#firmware-update">3.14. Firmware Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-preset">3.15. Update Preset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#device-disconnection-and-reconnection">3.16. Device Disconnection and Reconnection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commonly-used-interfaces">3.17. Commonly Used Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtain-the-serial-number">3.17.1. Obtain the Serial Number</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-streamprofile">3.17.2. Obtain StreamProfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-imu-streamprofile">3.17.3. Obtain IMUÂ StreamProfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-intrinsic-and-extrinsic-parameters">3.17.4. Obtain Intrinsic and Extrinsic Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-imu-intrinsic-parameters">3.17.5. Obtain IMU Intrinsic Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-the-extrinsic-parameters-between-video-frames-and-imu">3.17.6. Obtain the Extrinsic Parameters Between Video Frames and IMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-depth-ae">3.17.7. Set Depth AE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-depth-exposure">3.17.8. Set Depth Exposure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-depth-gain">3.17.9. Set Depth Gain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-depth-mirror">3.17.10. Set Depth Mirror</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-depth-flip">3.17.11. Set Depth Flip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-depth-rotation">3.17.12. Set Depth Rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-the-unit-of-depth">3.17.13. Set the Unit of Depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-the-minimum-and-maximum-values-of-depth">3.17.14. Set the Minimum and Maximum Values of Depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="#camera-depth-working-mode">3.17.15. Camera Depth Working Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disparity-to-depth-d2d">3.17.16. Disparity to Depth (D2D)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-ae">3.17.17. Set IR AE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-exposure">3.17.18. Set IR Exposure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-gain">3.17.19. Set IR Gain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-target-brightness">3.17.20. Set IR Target Brightness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-maximum-exposure-value">3.17.21. Set IR Maximum Exposure Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-mirror">3.17.22. Set IR Mirror</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-flip">3.17.23. Set IR Flip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-ir-rotation">3.17.24. Set IR Rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-ae">3.17.25. Set Color AE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-exposure">3.17.26. Set Color Exposure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-gain">3.17.27. Set Color Gain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-mirror">3.17.28. Set Color Mirror</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-flip">3.17.29. Set Color Flip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-rotation">3.17.30. Set Color Rotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-automatic-white-balance-awb">3.17.31. Set Color Automatic White Balance (AWB)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-white-balance-parameters">3.17.32. Set Color White Balance Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-the-color-brightness">3.17.33. Set the Color Brightness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-sharpness">3.17.34. Set Color Sharpness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-gamma">3.17.35. Set Color Gamma</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-saturation">3.17.36. Set Color Saturation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-hue">3.17.37. Set Color Hue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-auto-exposure-priority">3.17.38. Set Color Auto Exposure Priority</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-backlight-compensation">3.17.39. Set Color Backlight Compensation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-contrast">3.17.40. Set Color Contrast</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-color-power-line-frequency">3.17.41. Set Color power line frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldp-switch">3.17.42. LDP Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-ldp-measurement-value">3.17.43. Obtain LDP Measurement Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-ldp-protection-status">3.17.44. Obtain LDP Protection Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#laser-switch">3.17.45. Laser Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#laser-on-off">3.17.46. Laser On-Off</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hdr-merge">3.17.47. HDRÂ Merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-metadata">3.17.48. Obtain MetaData</a></li>
<li class="toctree-l3"><a class="reference internal" href="#triggered-capture">3.17.49. Triggered Capture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#software-triggered-capture">3.17.49.1. Software Triggered Capture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#timed-capture">3.17.49.2. Timed Capture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#timestamp-reset">3.17.50. Timestamp Reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-time-synchronization">3.17.51. Device Time Synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-reboot">3.17.52. Device Reboot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-device-ip-address-modification-settings">3.17.53. Network Device IP Address Modification Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-device-synchronization">3.17.54. Multi-device Synchronization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#usb-and-network-device">3.17.54.1. USB and Network Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gmsl-device">3.17.54.2. GMSL device</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#build">3.17.54.2.1. Build</a></li>
<li class="toctree-l5"><a class="reference internal" href="#multi-devices-sync-configuration">3.17.54.2.2. Multi-devices sync configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="#test-results">3.17.54.2.3. Test Results</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">4. License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OrbbecSDK V2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Application_Guide.html"><span class="section-number">3. </span>Application Guide</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.1. </span>Create Device</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/source/3_Application_Guide/ApplicationGuide.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="create-device">
<h1><span class="section-number">3.1. </span>Create Device<a class="headerlink" href="#create-device" title="Link to this heading">ï</a></h1>
<p>There are multiple ways to obtain a Device.
If your use case involves multiple devices, it is recommended to use Method 1, Method 2, or Method 3.
If you are working with a single device, Method 4 is recommended for accessing the Device.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create a Context</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Context</span><span class="w"> </span><span class="n">ctx</span><span class="p">;</span>

<span class="c1">// Method 1</span>
<span class="c1">// Enumerate all connected devices through the Context.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">DeviceList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">queryDeviceList</span><span class="p">();</span>
<span class="c1">// Get the device at index 0.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">devices</span><span class="o">-&gt;</span><span class="n">getDevice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// Method 2</span>
<span class="c1">// Enumerate all connected devices through the Context.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">DeviceList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">queryDeviceList</span><span class="p">();</span>
<span class="c1">// Get the device by serial number.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">devices</span><span class="o">-&gt;</span><span class="n">getDeviceBySN</span><span class="p">(</span><span class="s">&quot;AE4M73D0040&quot;</span><span class="p">);</span>

<span class="c1">// Method 3</span>
<span class="c1">// Enumerate all connected devices through the Context.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">DeviceList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">queryDeviceList</span><span class="p">();</span>
<span class="c1">// Get the device by uid.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">devices</span><span class="o">-&gt;</span><span class="n">getDeviceByUid</span><span class="p">(</span><span class="s">&quot;NDSG3958LKHY45&quot;</span><span class="p">);</span>

<span class="c1">// Method 4</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// Get the device by pipeline.</span>
<span class="k">auto</span><span class="w">         </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getDevice</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="create-pipeline">
<h1><span class="section-number">3.2. </span>Create Pipeline<a class="headerlink" href="#create-pipeline" title="Link to this heading">ï</a></h1>
<p>There are two ways to create a Pipeline.
If your use case involves multiple devices, use Method 2, which creates a separate Pipeline for each Device.
For single-device scenarios, Method 1 is the most straightforward way to create a Pipeline.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Method 1</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">//Method 2ï¼create with device</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="o">&gt;</span><span class="p">(</span><span class="n">device</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="obtain-the-sensor-list">
<h1><span class="section-number">3.3. </span>Obtain the Sensor List<a class="headerlink" href="#obtain-the-sensor-list" title="Link to this heading">ï</a></h1>
<p>Obtain the sensor list from the Device, and then obtain the supported sensor types from the sensor list.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Get the device from pipeline.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Device</span><span class="o">&gt;</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getDevice</span><span class="p">();</span>

<span class="c1">// 3.Get the sensor list from device.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">SensorList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sensorList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getSensorList</span><span class="p">();</span>

<span class="c1">// 4.Create a config for pipeline.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 5.Query all supported sensor type</span>
<span class="k">for</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">sensorList</span><span class="o">-&gt;</span><span class="n">getCount</span><span class="p">();</span><span class="w"> </span><span class="n">index</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">OBSensorType</span><span class="w"> </span><span class="n">sensorType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensorList</span><span class="o">-&gt;</span><span class="n">getSensorType</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Supported Sensor type: </span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sensorType</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="obtain-video-data-streams">
<h1><span class="section-number">3.4. </span>Obtain Video Data Streams<a class="headerlink" href="#obtain-video-data-streams" title="Link to this heading">ï</a></h1>
<p>Common data streams include Depth, Left IR, Right IR, and Color.
Using the Depth stream as an example, the resolution is set to 640x400, the frame rate to 15 fps, and the output format to Y16.
The handling of infrared and color streams follows a similar process.</p>
<p>The difference between Blocking Polling Mode and Asynchronous Callback Mode: In Blocking Polling Mode after frame aggregation in the pipeline, the frame is inserted into the queue, and the application obtain frame data from the queue by calling waitForFrameset. In Asynchronous Callback Mode, after frame aggregation, the frame is directly passed back to the application via a callback. The advantage of Asynchronous Callback Mode is that it is more real-time, but in the callback function, the application layer should avoid time-consuming tasks and should release the frame as soon as possible.</p>
<section id="blocking-polling-mode">
<h2><span class="section-number">3.4.1. </span>Blocking Polling Mode<a class="headerlink" href="#blocking-polling-mode" title="Link to this heading">ï</a></h2>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Get_Depth.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>

<span class="c1">// 4.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 5.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// Get the depth frame.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">depthFrameRaw</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Get the depth Frame form depthFrame,process depth data.</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">DepthFrame</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">      </span><span class="kt">uint32_t</span><span class="w">        </span><span class="n">width</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getWidth</span><span class="p">();</span>
<span class="w">      </span><span class="kt">uint32_t</span><span class="w">        </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getHeight</span><span class="p">();</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">(</span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getData</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 6.Stop the pipeline</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="asynchronous-callback-mode">
<h2><span class="section-number">3.4.2. </span>Asynchronous Callback Mode<a class="headerlink" href="#asynchronous-callback-mode" title="Link to this heading">ï</a></h2>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Get_Depth_Callback.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>

<span class="c1">// 4.Start the pipeline with config and callback.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">FrameSet</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frameSet</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Get the depth frame.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">depthFrameRaw</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Get the depth Frame form depthFrame,process depth data.</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">DepthFrame</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">      </span><span class="kt">uint32_t</span><span class="w">        </span><span class="n">width</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getWidth</span><span class="p">();</span>
<span class="w">      </span><span class="kt">uint32_t</span><span class="w">        </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getHeight</span><span class="p">();</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">(</span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getData</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// 5.Stop the pipeline</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="obtain-imu-data-streams">
<h1><span class="section-number">3.5. </span>Obtain Imu Data Streams<a class="headerlink" href="#obtain-imu-data-streams" title="Link to this heading">ï</a></h1>
<section id="id1">
<h2><span class="section-number">3.5.1. </span>Blocking Polling Mode<a class="headerlink" href="#id1" title="Link to this heading">ï</a></h2>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Get_Imu.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable Accel stream, You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableAccelStream</span><span class="p">(</span><span class="n">OB_ACCEL_FS_4g</span><span class="p">,</span><span class="w"> </span><span class="n">OB_SAMPLE_RATE_200_HZ</span><span class="p">);</span>

<span class="c1">// 4.Enable Gyro stream, You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableGyroStream</span><span class="p">(</span><span class="n">OB_GYRO_FS_1000dps</span><span class="p">,</span><span class="w"> </span><span class="n">OB_SAMPLE_RATE_200_HZ</span><span class="p">);</span>

<span class="c1">// 5.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 6.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">accelFrameRaw</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_ACCEL</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">gyroFrameRaw</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_GYRO</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 7.Stop the pipeline</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="id2">
<h2><span class="section-number">3.5.2. </span>Asynchronous Callback Mode<a class="headerlink" href="#id2" title="Link to this heading">ï</a></h2>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Get_Imu_Callback.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable Accel stream, You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableAccelStream</span><span class="p">(</span><span class="n">OB_ACCEL_FS_4g</span><span class="p">,</span><span class="w"> </span><span class="n">OB_SAMPLE_RATE_200_HZ</span><span class="p">);</span>

<span class="c1">// 4.Enable Gyro stream, You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableGyroStream</span><span class="p">(</span><span class="n">OB_GYRO_FS_1000dps</span><span class="p">,</span><span class="w"> </span><span class="n">OB_SAMPLE_RATE_200_HZ</span><span class="p">);</span>

<span class="c1">// 5.Start the pipeline with config and callback.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">FrameSet</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frameSet</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">accelFrameRaw</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_ACCEL</span><span class="p">);</span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">gyroFrameRaw</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_GYRO</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// 6.Stop the pipeline</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="frame-aggregate">
<h1><span class="section-number">3.6. </span>Frame Aggregate<a class="headerlink" href="#frame-aggregate" title="Link to this heading">ï</a></h1>
<p>The frame aggregation feature is used to configure the output mode of frame data streams. This feature can be set through the interface provided by ob::Config.
There are four types of frame aggregation modes.</p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set through the interface provided by ob::Config.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">setFrameAggregateOutputMode</span><span class="p">(</span><span class="n">OBFrameAggregateOutputMode</span><span class="w"> </span><span class="n">mode</span><span class="p">);</span>

<span class="c1">// The types of modes included in frame aggregation are as follows.</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Only FrameSet that contains all types of data frames will be output</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Color Frame Require output mode</span>
<span class="cm">     * @brief Suitable for Color using H264, H265 and other inter-frame encoding format open stream</span>
<span class="cm">     * @attention In this mode, the user may return null when getting a non-Color type data frame from the acquired FrameSet</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_COLOR_FRAME_REQUIRE</span><span class="p">,</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief FrameSet for any case will be output</span>
<span class="cm">     * @attention In this mode, the user may return null when getting the specified type of data frame from the acquired FrameSet</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ANY_SITUATION</span><span class="p">,</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Disable Frame Aggreate</span>
<span class="cm">     * @attention In this mode, All types of data frames will output independently.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_DISABLE</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_MODE</span><span class="p">,</span><span class="n">OBFrameAggregateOutputMode</span><span class="p">,</span><span class="n">ob_frame_aggregate_output_mode</span>
</pre></div>
</div>
<p>For example, if Depth, Color, Left IR, and Right IR streams are all enabled and the frame aggregation mode is set to OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE, it means that the returned FrameSet will contain non-null frame data for all four streams.
Sample code is shown below:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>
<span class="c1">// 4.Enable color video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_YUYV</span><span class="p">);</span>
<span class="c1">// 5.Enable left ir video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_IR_LEFT</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y8</span><span class="p">);</span>
<span class="c1">// 6.Enable right ir video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_IR_RIGHT</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y8</span><span class="p">);</span>
<span class="c1">// 7.Set the frame aggregate output mode to ensure all types of frames are included in the output frameset</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setFrameAggregateOutputMode</span><span class="p">(</span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE</span><span class="p">);</span>

<span class="c1">// 8.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 9.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// 10.Push the frameset to the Align Filter to align the frames.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">alignFrameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">FrameSet</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="c1">// Get all frame.</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">colorFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_COLOR</span><span class="p">);</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">leftIrFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_IR_LEFT</span><span class="p">);</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">RightIrFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_RIGHT_LEFT</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 11.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Frame_Aggregate.png" /></p>
</section>
<section id="d2c">
<h1><span class="section-number">3.7. </span>D2C<a class="headerlink" href="#d2c" title="Link to this heading">ï</a></h1>
<p>D2C requires both Depth and Color streams to be enabled. The following section introduces Hardware D2C and Software D2C.</p>
<section id="hardware-d2c">
<h2><span class="section-number">3.7.1. </span>Hardware D2C<a class="headerlink" href="#hardware-d2c" title="Link to this heading">ï</a></h2>
<p>The key interface for hardware D2C is setting the D2C mode to hardware via ob::Config, which enables the hardware D2C functionality.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">-&gt;</span><span class="n">setAlignMode</span><span class="p">(</span><span class="n">ALIGN_D2C_HW_MODE</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image" src="../../_images/HW_D2C.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>

<span class="c1">// 4.Enable color video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_YUYV</span><span class="p">);</span>

<span class="c1">// 5.Set hardware D2C alignment mode.</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setAlignMode</span><span class="p">(</span><span class="n">ALIGN_D2C_HW_MODE</span><span class="p">);</span><span class="w"> </span>

<span class="c1">// 6.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 7.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// Get the depth and color frame.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">colorFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_COLOR</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 8.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="software-d2c">
<h2><span class="section-number">3.7.2. </span>Software D2C<a class="headerlink" href="#software-d2c" title="Link to this heading">ï</a></h2>
<p>Software D2C can be implemented using either synchronous or asynchronous methods. The following introduces the asynchronous approach.Software D2C is implemented using the ob::Align filter,After obtain the FrameSet, you push it to ob::Align via the pushFrame method. The processed D2C FrameSet is then returned asynchronously through a callback.</p>
<ul class="simple">
<li><p>Core Interface</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span>Â <span class="n">depth2colorAlign</span>Â <span class="o">=</span>Â <span class="n">std</span><span class="p">::</span><span class="n">make_shared</span> <span class="o">&lt;</span><span class="n">ob</span><span class="p">::</span><span class="n">Align</span><span class="o">&gt;</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">);</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/SW-D2C.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>

<span class="c1">// 4.Enable color video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_YUYV</span><span class="p">);</span>

<span class="c1">// 5.Set the frame aggregate output mode to ensure all types of frames are included in the output frameset</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setFrameAggregateOutputMode</span><span class="p">(</span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE</span><span class="p">);</span>

<span class="c1">// 6.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// 7.Create a filter to align depth frame to color frame</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depth2colorAlign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Align</span><span class="o">&gt;</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">);</span>

<span class="c1">// 8.Set the callback function for the Align Filter</span>
<span class="n">depth2colorAlign</span><span class="o">-&gt;</span><span class="n">setCallBack</span><span class="p">([</span><span class="o">&amp;</span><span class="n">win</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 11.Processed frames after alignment</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">alignFrameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">FrameSet</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">alignFrameSet</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="c1">// Get the depth and color frame.</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alignFrameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">colorFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alignFrameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_COLOR</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 9.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// 10.Push the frameset to the Align Filter to align the frames.</span>
<span class="w">    </span><span class="c1">// The frameset will be processed in an internal thread, and the resulting frames will be asynchronously output via the callback function.</span>
<span class="w">    </span><span class="n">depth2colorAlign</span><span class="o">-&gt;</span><span class="n">pushFrame</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 12.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="software-c2d">
<h1><span class="section-number">3.8. </span>Software C2D<a class="headerlink" href="#software-c2d" title="Link to this heading">ï</a></h1>
<p>Software C2D can be implemented using either synchronous or asynchronous methods. The following introduces the asynchronous approach.Software C2D is implemented using the ob::Align filter,After obtain the FrameSet, you push it to ob::Align via the pushFrame method. After processing is completed, the callback function of ob::Align returns the FrameSet resulting from software C2D.</p>
<p><strong>Core Interface</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span>Â <span class="n">color2depthAlign</span>Â <span class="o">=</span>Â <span class="n">std</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="p">::</span><span class="n">Align</span><span class="o">&gt;</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">);</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/C2D.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>

<span class="c1">// 4.Enable color video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_YUYV</span><span class="p">);</span>

<span class="c1">// 5.Set the frame aggregate output mode to ensure all types of frames are included in the output frameset</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setFrameAggregateOutputMode</span><span class="p">(</span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE</span><span class="p">);</span>

<span class="c1">// 6.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// 7.create a filter to align color frame to depth frame</span>
<span class="k">auto</span><span class="w"> </span><span class="n">color2depthAlign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Align</span><span class="o">&gt;</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">);</span>

<span class="c1">// 8.Set the callback function for the Align Filter</span>
<span class="n">depth2colorAlign</span><span class="o">-&gt;</span><span class="n">setCallBack</span><span class="p">([</span><span class="o">&amp;</span><span class="n">win</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 11.Processed frames after alignment</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">alignFrameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">FrameSet</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="c1">// Get the depth and color frame.</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="w">       </span><span class="k">auto</span><span class="w"> </span><span class="n">colorFrameRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_COLOR</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 9.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// 10.Push the frameset to the Align Filter to align the frames.</span>
<span class="w">    </span><span class="c1">// The frameset will be processed in an internal thread, and the resulting frames will be asynchronously output via the callback function.</span>
<span class="w">    </span><span class="n">color2depthAlign</span><span class="o">-&gt;</span><span class="n">pushFrame</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 12.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="depth-point-cloud">
<h1><span class="section-number">3.9. </span>Depth Point Cloud<a class="headerlink" href="#depth-point-cloud" title="Link to this heading">ï</a></h1>
<p>The SDK provides ob::PointCloudFilter, for processing depth data and generating point clouds. Depth data can be acquired either through a blocking method or via a callback. Users can choose the appropriate method based on their specific needs. The following section demonstrates how to obtain depth streams using the blocking method and generate point clouds using ob::PointCloudFilter.</p>
<p>There are two ways to use ob::PointCloudFilter to convert depth data into point clouds: Synchronous Mode and Asynchronous Callback Mode.</p>
<section id="synchronous-mode">
<h2><span class="section-number">3.9.1. </span>Synchronous Mode<a class="headerlink" href="#synchronous-mode" title="Link to this heading">ï</a></h2>
<p>Synchronous mode usage of the ob::PointCloudFilter interfaceï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create PointCloudFilter</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// set to create point cloud format</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_POINT</span><span class="p">);</span>

<span class="c1">// process the frameset to generate point cloud frame (pass into a single depth frame to process is also valid)</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">frameset</span><span class="p">);</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Depth_Cloud.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>
<span class="c1">// 4.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// 5.Create a point cloud Filter, which will be used to generate pointcloud frame from depth and color frames.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 6.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// 7.set to create point cloud format</span>
<span class="w">    </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_POINT</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 8.process the frameset to generate point cloud frame (pass into a single depth frame to process is also valid)</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 9.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2><span class="section-number">3.9.2. </span>Asynchronous Callback Mode<a class="headerlink" href="#id3" title="Link to this heading">ï</a></h2>
<p>Asynchronous usage of the ob::PointCloudFilter interfaceï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create PointCloudFilter</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Set callback</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCallBack</span><span class="p">([</span><span class="o">&amp;</span><span class="n">win</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="c1">// TODO:Return the frame after point cloud filter</span>
<span class="p">});</span>

<span class="c1">// set to create point cloud format</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_POINT</span><span class="p">);</span>

<span class="c1">// Pass the FrameSet returned by waitForFrameset to point cloud filter for processing</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">pushFrame</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Depth_Cloud_Callback.png" /></p>
<p>Key API Descriptions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>
<span class="c1">// 4.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// 5.Create a point cloud Filter, which will be used to generate pointcloud frame from depth and color frames.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 6.Set the callback function for the Align Filter</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCallBack</span><span class="p">([</span><span class="o">&amp;</span><span class="n">win</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 10.Processed frame after point cloud filter</span>
<span class="w">    </span><span class="c1">// TODO:User processing...</span>
<span class="p">});</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 7.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 8.set to create point cloud format</span>
<span class="w">    </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_POINT</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 9.Push the frameset to the point cloud Filter to align the frames.</span>
<span class="w">    </span><span class="c1">// The frameset will be processed in an internal thread, and the resulting frames will be asynchronously output via the callback function.</span>
<span class="w">    </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">pushFrame</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 11.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="rgbd-point-cloud">
<h1><span class="section-number">3.10. </span>RGBD Point Cloud<a class="headerlink" href="#rgbd-point-cloud" title="Link to this heading">ï</a></h1>
<p>RGBD point clouds can be generated using the SDK by acquiring both depth and color data streams, and then processing them with ob::PointCloudFilter.</p>
<p>Both depth and color streams can be obtained using either the blocking method or the callback method, allowing users to choose based on their specific needs.
The following section demonstrates how to acquire depth and color streams using the blocking method and generate an RGBD point cloud using ob::PointCloudFilter.</p>
<p>There are two ways to use ob::PointCloudFilter to generate RGBD point cloud data from depth and color frames: Synchronous Mode and Asynchronous Callback Mode.</p>
<section id="id4">
<h2><span class="section-number">3.10.1. </span>Synchronous Mode<a class="headerlink" href="#id4" title="Link to this heading">ï</a></h2>
<p>Using ob::PointCloudFilter in Synchronous mode:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create PointCloudFilter</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 2.set to create RGBD point cloud format</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_RGB_POINT</span><span class="p">);</span>

<span class="c1">// 3.process the frameset to generate point cloud frame (pass into a single depth frame to process is also valid)</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">frameset</span><span class="p">);</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Color_Cloud.png" /></p>
<p>Key API Description:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>
<span class="c1">// 4.Enable color video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_YUYV</span><span class="p">);</span>
<span class="c1">// 5.Set the frame aggregate output mode to ensure all types of frames are included in the output frameset</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setFrameAggregateOutputMode</span><span class="p">(</span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE</span><span class="p">);</span>
<span class="c1">// 6.Set hardware D2C alignment mode</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setAlignMode</span><span class="p">(</span><span class="n">ALIGN_D2C_HW_MODE</span><span class="p">)</span>

<span class="c1">// 7.Enable frame synchronization to ensure depth frame and color frame on output frameset are synchronized.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">enableFrameSync</span><span class="p">();</span>
<span class="c1">// 8.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// 9.Create a point cloud Filter, which will be used to generate pointcloud frame from depth and color frames.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 10.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// 11.set to create RGBD point cloud format (will be effective only if color frame and depth frame are contained in the frameset)</span>
<span class="w">    </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_RGB_POINT</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 12.process the frameset to generate point cloud frame (pass into a single depth frame to process is also valid)</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 13.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="id5">
<h2><span class="section-number">3.10.2. </span>Asynchronous Callback Mode<a class="headerlink" href="#id5" title="Link to this heading">ï</a></h2>
<p>Using ob::PointCloudFilter inÂ asynchronous callback mode:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create PointCloudFilter</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 2.Set callback</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCallBack</span><span class="p">([</span><span class="o">&amp;</span><span class="n">win</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="c1">// TODO:Return the frame after point cloud filter</span>
<span class="p">});</span>

<span class="c1">// 3.set to create RGBD point cloud format</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_RGB_POINT</span><span class="p">);</span>

<span class="c1">// 4.Pass the FrameSet returned by waitForFrameset to point cloud filter for processing</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">pushFrame</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Color_Cloud_Callback.png" /></p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device.</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// 2.Create config.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// 3.Enable depth video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_DEPTH</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">);</span>
<span class="c1">// 4.Enable color video stream. You can modify the parameters based on your usage requirements</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">enableVideoStream</span><span class="p">(</span><span class="n">OB_STREAM_COLOR</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_YUYV</span><span class="p">);</span>
<span class="c1">// 5.Set the frame aggregate output mode to ensure all types of frames are included in the output frameset</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setFrameAggregateOutputMode</span><span class="p">(</span><span class="n">OB_FRAME_AGGREGATE_OUTPUT_ALL_TYPE_FRAME_REQUIRE</span><span class="p">);</span>
<span class="c1">// 6.Set hardware D2C alignment mode</span>
<span class="n">config</span><span class="o">-&gt;</span><span class="n">setAlignMode</span><span class="p">(</span><span class="n">ALIGN_D2C_HW_MODE</span><span class="p">)</span>

<span class="c1">// 7.Enable frame synchronization to ensure depth frame and color frame on output frameset are synchronized.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">enableFrameSync</span><span class="p">();</span>
<span class="c1">// 8.Start the pipeline with config.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// 9.Create a point cloud Filter, which will be used to generate pointcloud frame from depth and color frames.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">pointCloud</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PointCloudFilter</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 10.Set the callback function for the Align Filter</span>
<span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCallBack</span><span class="p">([</span><span class="o">&amp;</span><span class="n">win</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 14.Processed frame after point cloud filter</span>
<span class="w">    </span><span class="c1">// TODO:User processing...</span>
<span class="p">});</span>

<span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 11.Wait for up to 100ms for a frameset in blocking mode.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">    </span><span class="c1">// 12.set to create RGBD point cloud format (will be effective only if color frame and depth frame are contained in the frameset)</span>
<span class="w">    </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">setCreatePointFormat</span><span class="p">(</span><span class="n">OB_FORMAT_RGB_POINT</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 13.process the frameset to generate point cloud frame (pass into a single depth frame to process is also valid)</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Frame</span><span class="o">&gt;</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pointCloud</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 15.Stop the pipeline.</span>
<span class="n">pipe</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="noise-removeal-filter">
<h1><span class="section-number">3.11. </span>Noise Removeal Filter<a class="headerlink" href="#noise-removeal-filter" title="Link to this heading">ï</a></h1>
<section id="hardware-noise-removeal-filter">
<h2><span class="section-number">3.11.1. </span>Hardware Noise Removeal Filter<a class="headerlink" href="#hardware-noise-removeal-filter" title="Link to this heading">ï</a></h2>
<p>Hardware Noise Removeal Filter reduces depth noise through on-device processing.</p>
<p>Currently, this feature is supported only on the Gemini 330 series (firmware version 1.4.60 and above).</p>
<p>When hardware filtering is enabled, itâs recommended to disable software denoising filters to reduce CPU usage.</p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getDevice</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_HW_NOISE_REMOVE_FILTER_ENABLE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_READ_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1.enable hardware noise removal filter.</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_HW_NOISE_REMOVE_FILTER_ENABLE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// 2.Adjust the threshold for hardware  noise removal filter.</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setFloatProperty</span><span class="p">(</span><span class="n">OB_PROP_HW_NOISE_REMOVE_FILTER_THRESHOLD_FLOAT</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/HW_NoiseRemvalFilter.png" /></p>
</section>
<section id="software-noise-removeal-filter">
<h2><span class="section-number">3.11.2. </span>Software Noise Removeal Filter<a class="headerlink" href="#software-noise-removeal-filter" title="Link to this heading">ï</a></h2>
<p>Software Noise Removeal Filter is a processing feature provided by the SDK that reduces depth noise through software algorithms.</p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1. Get device by Pipeline</span>
<span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getDevice</span><span class="p">();</span>
<span class="c1">// 2. Determine whether to enable filter</span>
<span class="k">auto</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_NOISE_REMOVAL_FILTER_BOOL</span><span class="p">);</span>
<span class="c1">// 3. get filter-related parameters</span>
<span class="k">auto</span><span class="w"> </span><span class="n">max_diff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_NOISE_REMOVAL_FILTER_MAX_DIFF_INT</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">max_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_NOISE_REMOVAL_FILTER_MAX_SPECKLE_SIZE_INT</span><span class="p">);</span>
<span class="c1">// 4. Set the relevant filter parameters</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_NOISE_REMOVAL_FILTER_BOOL</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_NOISE_REMOVAL_FILTER_MAX_DIFF_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">);</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_NOISE_REMOVAL_FILTER_MAX_SPECKLE_SIZE_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">960</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="depth-post-processing-filters">
<h1><span class="section-number">3.12. </span>Depth Post-Processing Filters<a class="headerlink" href="#depth-post-processing-filters" title="Link to this heading">ï</a></h1>
<p>The SDK provides a recommended list of post-processing filters,For details on how to use the post-processing filter list interface, refer to the advanced.post_processing sample included with the SDK.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a pipeline with default device</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>

<span class="c1">// 2.Get the device and sensor, and get the list of recommended filters for the sensor</span>
<span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getDevice</span><span class="p">();</span>
<span class="c1">// 3. Get depth sensor</span>
<span class="k">auto</span><span class="w"> </span><span class="n">sensor</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getSensor</span><span class="p">(</span><span class="n">OB_SENSOR_DEPTH</span><span class="p">);</span>
<span class="c1">// 4.Create recommend filter list</span>
<span class="k">auto</span><span class="w"> </span><span class="n">filterList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensor</span><span class="o">-&gt;</span><span class="n">createRecommendedFilters</span><span class="p">();</span>

<span class="c1">// 5.Apply the recommended filters to the depth frame</span>
<span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">filter</span><span class="o">:</span><span class="w"> </span><span class="n">filterList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">filter</span><span class="o">-&gt;</span><span class="n">isEnabled</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Only apply enabled filters</span>
<span class="w">        </span><span class="n">processedFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filter</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">depthFrame</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Depth_PostFilter.png" /></p>
</section>
<section id="recording-and-playback">
<h1><span class="section-number">3.13. </span>Recording and Playback<a class="headerlink" href="#recording-and-playback" title="Link to this heading">ï</a></h1>
<section id="recording">
<h2><span class="section-number">3.13.1. </span>Recording<a class="headerlink" href="#recording" title="Link to this heading">ï</a></h2>
<p>Data stream recording is primarily implemented using ob::RecordDevice.</p>
<p>Taking depth stream recording as an example, you can set the resolution to 640Ã400, the frame rate to 15 fps, and the output format to Y16.
The method for recording infrared and color streams is similar.
If you want to record multiple streams at the same time, you can enable them simultaneously.</p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Initialize recording device with output file</span>
<span class="k">auto</span><span class="w"> </span><span class="n">recordDevice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">RecordDevice</span><span class="o">&gt;</span><span class="p">(</span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">filePath</span><span class="p">);</span>

<span class="c1">// Start record</span>
<span class="n">recorder</span><span class="o">-&gt;</span><span class="n">resume</span><span class="p">();</span>

<span class="c1">// Stop record</span>
<span class="n">recorder</span><span class="o">-&gt;</span><span class="n">pause</span><span class="p">();</span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Recorder.png" /></p>
</section>
<section id="playback">
<h2><span class="section-number">3.13.2. </span>Playback<a class="headerlink" href="#playback" title="Link to this heading">ï</a></h2>
<p>Data stream playback is primarily implemented using ob::PlaybackDevice.
For a detailed playback implementation, refer to the SDK sample ob_device_playback.</p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Initialize playback device with input file</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PlaybackDevice</span><span class="o">&gt;</span><span class="w"> </span><span class="n">playback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PlaybackDevice</span><span class="o">&gt;</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>

<span class="c1">//Set playback speed, Setting it to 2 indicates playback at twice the speed.</span>
<span class="n">playback</span><span class="o">-&gt;</span><span class="n">setPlaybackRate</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w">  </span>

<span class="c1">//The duration of the playback device, in milliseconds.</span>
<span class="n">playback</span><span class="o">-&gt;</span><span class="n">getDuration</span><span class="p">();</span><span class="w"> </span>

<span class="c1">// Get the current playback position</span>
<span class="n">playback</span><span class="o">-&gt;</span><span class="n">getPosition</span><span class="p">();</span>

<span class="c1">//Set the starting point for playback, which must be within the total duration of the recording.</span>
<span class="n">playback</span><span class="o">-&gt;</span><span class="n">seek</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span><span class="w"> </span>
</pre></div>
</div>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/Playback.png" /></p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get valid .bag</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w">   </span><span class="n">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;./Depth.bag&quot;</span><span class="p">;</span>

<span class="c1">// 1.Create a playback device with a Rosbag file</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PlaybackDevice</span><span class="o">&gt;</span><span class="w"> </span><span class="n">playback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">PlaybackDevice</span><span class="o">&gt;</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
<span class="c1">// 2.Create a pipeline with the playback device</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="o">&gt;</span><span class="p">(</span><span class="n">playback</span><span class="p">);</span>
<span class="c1">// 3.Enable all recording streams from the playback device</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// 4.Set playback status change callback, when the playback stops, start the pipeline again with the same config</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">playbackStop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="n">playback</span><span class="o">-&gt;</span><span class="n">setPlaybackStatusChangeCallback</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](</span><span class="n">OBPlaybackStatus</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">OB_PLAYBACK_STOPPED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">playbackStop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// 5.Get the list of playback sensors</span>
<span class="k">auto</span><span class="w"> </span><span class="n">sensorList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">playback</span><span class="o">-&gt;</span><span class="n">getSensorList</span><span class="p">();</span>
<span class="c1">// 6.enable the data streams for playback</span>
<span class="k">for</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">sensorList</span><span class="o">-&gt;</span><span class="n">getCount</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">sensorType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sensorList</span><span class="o">-&gt;</span><span class="n">getSensorType</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="o">-&gt;</span><span class="n">enableStream</span><span class="p">(</span><span class="n">sensorType</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 7.Start the pipeline with the config</span>
<span class="n">pipe</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">playbackStop</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="o">-&gt;</span><span class="n">waitForFrames</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">frameSet</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Get depth frame</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">depthFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 9.Stop the pipeline.</span>
<span class="n">pipe</span><span class="o">-&gt;</span><span class="n">stop</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="firmware-update">
<h1><span class="section-number">3.14. </span>Firmware Update<a class="headerlink" href="#firmware-update" title="Link to this heading">ï</a></h1>
<p>Users can develop firmware update functionality for RGBD cameras as needed.
The following demonstrates how to update the firmware of a single RGBD camera, with a corresponding workflow diagram provided.</p>
<p>Workflow Diagram:</p>
<p><img alt="image" src="../../_images/FirewareUpdate.png" /></p>
<p>Key API Descriptionï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create a context to access the connected devices</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Context</span><span class="o">&gt;</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">Context</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// 2.Get connected devices from the context</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">DeviceList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deviceList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="o">-&gt;</span><span class="n">queryDeviceList</span><span class="p">();</span>
<span class="c1">// 3.Get the first device.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceList</span><span class="o">-&gt;</span><span class="n">getDevice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="c1">// 4.Set async to false to synchronously block and wait for the device firmware upgrade to complete.</span>
<span class="n">devices</span><span class="o">-&gt;</span><span class="n">updateFirmware</span><span class="p">(</span><span class="n">firmwarePath</span><span class="p">,</span><span class="w"> </span><span class="n">firmwareUpdateCallback</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>

<span class="c1">//5.Firmware upgrade status callback</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">firmwareUpdateCallback</span><span class="p">(</span><span class="n">OBFwUpdateState</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">STAT_VERIFY_SUCCESS</span><span class="p">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Image file verification success&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">STAT_FILE_TRANSFER</span><span class="p">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;File transfer in progress&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">STAT_DONE</span><span class="p">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Update completed&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">STAT_IN_PROGRESS</span><span class="p">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Upgrade in progress&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">STAT_START</span><span class="p">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Starting the upgrade&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">STAT_VERIFY_IMAGE</span><span class="p">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Verifying image file&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Unknown status or error&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Message : &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">flush</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 6.Reboot the device after a successful update.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">reboot</span><span class="p">();</span>
</pre></div>
</div>
<p>To update multiple device firmware, refer to
<a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/2.device.multi_devices_firmware_update">multi device firmware update</a></p>
</section>
<section id="update-preset">
<h1><span class="section-number">3.15. </span>Update Preset<a class="headerlink" href="#update-preset" title="Link to this heading">ï</a></h1>
<p>To update optional depth presets, refer to <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/2.device.optional_depth_presets_update">optional_depth_presets_update</a></p>
<ul class="simple">
<li><p>Define a Callback Function for Firmware Update Progress.</p></li>
</ul>
<p>You can define a callback function to get the progress of the firmware update. The callback function will be called every time the device updates its progress.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">void</span> <span class="n">presetUpdateCallback</span><span class="p">(</span><span class="n">OBFwUpdateState</span> <span class="n">state</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">message</span><span class="p">,</span> <span class="n">uint8_t</span> <span class="n">percent</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">show</span> <span class="n">update</span> <span class="n">state</span> <span class="ow">and</span> <span class="n">message</span> <span class="n">here</span>
    <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Update the optional depth presets.</p></li>
</ul>
<p>After selecting a device, update its presets by calling the updateOptionalDepthPresets function with the specified callback.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">device</span><span class="o">-&gt;</span><span class="n">updateOptionalDepthPresets</span><span class="p">(</span><span class="n">filePaths</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">presetUpdateCallback</span><span class="p">);</span>
</pre></div>
</div>
<p>Note: The api supports upgrading multiple presets at once. For G300 series devices, a maximum of 3 presets can be written at a time. The first preset written will be set as the default preset.</p>
</section>
<section id="device-disconnection-and-reconnection">
<h1><span class="section-number">3.16. </span>Device Disconnection and Reconnection<a class="headerlink" href="#device-disconnection-and-reconnection" title="Link to this heading">ï</a></h1>
<p>The SDK provides a device connection change listener, which helps users handle exceptions when a device is disconnected and enables recovery the device is reconnected.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.create context</span>
<span class="n">ob</span><span class="o">::</span><span class="n">Context</span><span class="w"> </span><span class="n">ctx</span><span class="p">;</span>

<span class="c1">// 2.register device callback</span>
<span class="n">ctx</span><span class="p">.</span><span class="n">setDeviceChangedCallback</span><span class="p">([](</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">DeviceList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">removedList</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">DeviceList</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deviceList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//Connected devices</span>
<span class="w">        </span><span class="n">printDeviceList</span><span class="p">(</span><span class="s">&quot;added&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">deviceList</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//Disconnected devices</span>
<span class="w">        </span><span class="n">printDeviceList</span><span class="p">(</span><span class="s">&quot;removed&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">removedList</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
<p>In the setDeviceChangedCallback callback of ob::Context,
removedList indicates that the SDK has detected a device disconnection (offline),while deviceList indicates that the SDK has detected a device connection (online).</p>
</section>
<section id="commonly-used-interfaces">
<h1><span class="section-number">3.17. </span>Commonly Used Interfaces<a class="headerlink" href="#commonly-used-interfaces" title="Link to this heading">ï</a></h1>
<section id="obtain-the-serial-number">
<h2><span class="section-number">3.17.1. </span>Obtain the Serial Number<a class="headerlink" href="#obtain-the-serial-number" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w">         </span><span class="n">device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getDevice</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">deviceInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getDeviceInfo</span><span class="p">();</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">serialNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceInfo</span><span class="o">-&gt;</span><span class="n">serialNumber</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="obtain-streamprofile">
<h2><span class="section-number">3.17.2. </span>Obtain StreamProfile<a class="headerlink" href="#obtain-streamprofile" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Obtain StreamProfile via Pipeline</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ob</span><span class="o">::</span><span class="n">Pipeline</span><span class="w"> </span><span class="n">pipe</span><span class="p">;</span>
<span class="c1">// Obtain the list of all Profile of the 3D camera.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorProfiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getStreamProfileList</span><span class="p">(</span><span class="n">OB_SENSOR_COLOR</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthProfiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">getStreamProfileList</span><span class="p">(</span><span class="n">OB_SENSOR_DEPTH</span><span class="p">);</span>

<span class="c1">// Get the color stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colorProfiles</span><span class="o">-&gt;</span><span class="n">getVideoStreamProfile</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_MJPG</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">);</span>
<span class="c1">// Get the depth stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthProfiles</span><span class="o">-&gt;</span><span class="n">getVideoStreamProfile</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w"> </span><span class="n">OB_FORMAT_Y16</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Obtain StreamProfile via Frame</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="o">-&gt;</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

<span class="c1">// Get the depth stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthProfile</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">depthFrame</span><span class="o">-&gt;</span><span class="n">getStreamProfile</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthVideoProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthProfile</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">VideoStreamProfile</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Get the color stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorFrame</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_COLOR</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorProfile</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">colorFrame</span><span class="o">-&gt;</span><span class="n">getStreamProfile</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorVideoProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colorProfile</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">VideoStreamProfile</span><span class="o">&gt;</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="obtain-imu-streamprofile">
<h2><span class="section-number">3.17.3. </span>Obtain IMUÂ StreamProfile<a class="headerlink" href="#obtain-imu-streamprofile" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Obtain IMU StreamProfile from IMU frame</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">();</span>

<span class="c1">// Get the accel stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">accelFrameRaw</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_ACCEL</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">accelStreamProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accelFrameRaw</span><span class="o">-&gt;</span><span class="n">getStreamProfile</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">accelProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accelStreamProfile</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">AccelStreamProfile</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Get the gyro stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">gyroFrameRaw</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_GYRO</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">gyroStreamProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gyroFrameRaw</span><span class="o">-&gt;</span><span class="n">getStreamProfile</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">gyroProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gyroStreamProfile</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">GyroStreamProfile</span><span class="o">&gt;</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="obtain-intrinsic-and-extrinsic-parameters">
<h2><span class="section-number">3.17.4. </span>Obtain Intrinsic and Extrinsic Parameters<a class="headerlink" href="#obtain-intrinsic-and-extrinsic-parameters" title="Link to this heading">ï</a></h2>
<p>Intrinsic and extrinsic parameters can be obtained via the StreamProfile.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get the depth intrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthIntrinsic</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">depthStreamProfile</span><span class="o">-&gt;</span><span class="n">getIntrinsic</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthDistortion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthStreamProfile</span><span class="o">-&gt;</span><span class="n">getDistortion</span><span class="p">();</span>

<span class="c1">// Get the color intrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorIntrinsic</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">colorVideoProfile</span><span class="o">-&gt;</span><span class="n">getIntrinsic</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">colorDistortion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colorVideoProfile</span><span class="o">-&gt;</span><span class="n">getDistortion</span><span class="p">();</span>

<span class="c1">// Get the depth to color extrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthToColorExtrinsic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthVideoProfile</span><span class="o">-&gt;</span><span class="n">getExtrinsicTo</span><span class="p">(</span><span class="n">colorVideoProfile</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="obtain-imu-intrinsic-parameters">
<h2><span class="section-number">3.17.5. </span>Obtain IMU Intrinsic Parameters<a class="headerlink" href="#obtain-imu-intrinsic-parameters" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">();</span>

<span class="k">auto</span><span class="w"> </span><span class="n">accelFrameRaw</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_ACCEL</span><span class="p">);</span>
<span class="c1">// Get the accel stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">accelStreamProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accelFrameRaw</span><span class="o">-&gt;</span><span class="n">getStreamProfile</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">accelProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accelStreamProfile</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">AccelStreamProfile</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// Get the accel stream intrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">accelIntrinsic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accelProfile</span><span class="o">-&gt;</span><span class="n">getIntrinsic</span><span class="p">();</span>

<span class="k">auto</span><span class="w"> </span><span class="n">gyroFrameRaw</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_GYRO</span><span class="p">);</span>
<span class="c1">// Get the gyro stream profile</span>
<span class="k">auto</span><span class="w"> </span><span class="n">gyroStreamProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gyroFrameRaw</span><span class="o">-&gt;</span><span class="n">getStreamProfile</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">gyroProfile</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">gyroStreamProfile</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">GyroStreamProfile</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// Get the gyro stream intrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">gyroIntrinsic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gyroProfile</span><span class="o">-&gt;</span><span class="n">getIntrinsic</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="obtain-the-extrinsic-parameters-between-video-frames-and-imu">
<h2><span class="section-number">3.17.6. </span>Obtain the Extrinsic Parameters Between Video Frames and IMU<a class="headerlink" href="#obtain-the-extrinsic-parameters-between-video-frames-and-imu" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// depth to gyro extrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthToGyroExtrinsic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthStreamProfile</span><span class="o">-&gt;</span><span class="n">getExtrinsicTo</span><span class="p">(</span><span class="n">gyroStreamProfile</span><span class="p">);</span>
<span class="c1">// depth to accel extrinsic</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthToAccelExtrinsic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depthStreamProfile</span><span class="o">-&gt;</span><span class="n">getExtrinsicTo</span><span class="p">(</span><span class="n">accelStreamProfile</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-depth-ae">
<h2><span class="section-number">3.17.7. </span>Set Depth AE<a class="headerlink" href="#set-depth-ae" title="Link to this heading">ï</a></h2>
<p>Set the Depth for automatic exposure.Set Depth AE is equivalent to set IR AE.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-depth-exposure">
<h2><span class="section-number">3.17.8. </span>Set Depth Exposure<a class="headerlink" href="#set-depth-exposure" title="Link to this heading">ï</a></h2>
<p>Set Depth exposure, prerequisites, you need to turn off the Depth AE. Set Depth exposure is equivalent to set IR exposure.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Disable AE</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="c1">// Set exposure</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_EXPOSURE_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"> </span>
</pre></div>
</div>
</section>
<section id="set-depth-gain">
<h2><span class="section-number">3.17.9. </span>Set Depth Gain<a class="headerlink" href="#set-depth-gain" title="Link to this heading">ï</a></h2>
<p>To set the exposure for Depth, you need to turn off the Depth AE. Set Depth gain is equivalent to set IR Gain.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Disable AE</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="c1">// Set gain. gain: the specific gain value</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_GAIN_INT</span><span class="p">,</span><span class="w"> </span><span class="n">gain</span><span class="p">);</span><span class="w">  </span><span class="c1">//</span>
</pre></div>
</div>
</section>
<section id="set-depth-mirror">
<h2><span class="section-number">3.17.10. </span>Set Depth Mirror<a class="headerlink" href="#set-depth-mirror" title="Link to this heading">ï</a></h2>
<p>Depth mirror refers to horizontally flipping the depth image along its vertical centerline, meaning the pixel positions on the left and right sides of the image are swapped.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_READ</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// Obtain the current mirror.</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">isOpen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_MIRROR_BOOL</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">isOpen</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-depth-flip">
<h2><span class="section-number">3.17.11. </span>Set Depth Flip<a class="headerlink" href="#set-depth-flip" title="Link to this heading">ï</a></h2>
<p>Depth Flip means flipping the depth image up and down along the X-axis, that is, swapping the upper and lower parts of the image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_FLIP_BOOL</span><span class="p">,</span> <span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span> <span class="p">{</span>
       <span class="o">//</span> <span class="n">true</span><span class="p">:</span> <span class="n">depth</span> <span class="ow">is</span> <span class="n">flipped</span> <span class="n">up</span> <span class="ow">and</span> <span class="n">down</span><span class="p">;</span> <span class="n">false</span><span class="p">:</span> <span class="n">Does</span> <span class="ow">not</span> <span class="n">flip</span>
    <span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_FLIP_BOOL</span><span class="p">,</span><span class="n">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-depth-rotation">
<h2><span class="section-number">3.17.12. </span>Set Depth Rotation<a class="headerlink" href="#set-depth-rotation" title="Link to this heading">ï</a></h2>
<p>Depth rotation can be rotated at 0, 90, 180, and 270 degrees. The default rotation is set to 0 degrees.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Rotation</span> <span class="n">parameters</span>
<span class="n">Typedef</span> <span class="n">enum</span> <span class="p">{</span>
    <span class="n">OB_ROTATE_DEGREE_0</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>    <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">0</span>
    <span class="n">OB_ROTATE_DEGREE_90</span>  <span class="o">=</span> <span class="mi">90</span><span class="p">,</span>   <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">90</span>
    <span class="n">OB_ROTATE_DEGREE_180</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span>  <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">180</span>
    <span class="n">OB_ROTATE_DEGREE_270</span> <span class="o">=</span> <span class="mi">270</span><span class="p">,</span>  <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">270</span>
<span class="p">}</span> <span class="n">ob_rotate_degree_type</span><span class="p">,</span> <span class="n">OBRotateDegreeType</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_ROTATE_INT</span><span class="p">,</span> <span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">rotation</span> <span class="n">angle</span>
    <span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_ROTATE_INT</span><span class="p">,</span> <span class="n">OB_ROTATE_DEGREE_90</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-the-unit-of-depth">
<h2><span class="section-number">3.17.13. </span>Set the Unit of Depth<a class="headerlink" href="#set-the-unit-of-depth" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>The G330 series supports setting an arbitrary depth unit in the firmware using the following interface:</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setFloatProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_UNIT_FLEXIBLE_ADJUSTMENT_FLOAT</span><span class="p">,</span><span class="mf">0.1</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>For  Gemini 2 series , only a limited set of predefined depth units can be configured using the following interface:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>typedef enum {
    OB_PRECISION_1MM, 
    OB_PRECISION_0MM8,
    OB_PRECISION_0MM4, 
    OB_PRECISION_0MM1, 
    OB_PRECISION_0MM2,  
    OB_PRECISION_0MM5,  
    OB_PRECISION_0MM05, 
    OB_PRECISION_UNKNOWN,
    OB_PRECISION_COUNT,
} OBDepthPrecisionLevel

device-&gt;setIntProperty(OB_PROP_DEPTH_PRECISION_LEVEL_INTï¼OB_PRECISION_1MM);
</pre></div>
</div>
</section>
<section id="set-the-minimum-and-maximum-values-of-depth">
<h2><span class="section-number">3.17.14. </span>Set the Minimum and Maximum Values of Depth<a class="headerlink" href="#set-the-minimum-and-maximum-values-of-depth" title="Link to this heading">ï</a></h2>
<p>To set the minimum and maximum values for Depth, any Depth values that fall outside this range are assigned a value of 0. This can be used to filter out noise.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// create ThresholdFilter filter </span>
<span class="k">auto</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ob</span><span class="o">::</span><span class="n">FilterFactory</span><span class="o">::</span><span class="n">createFilter</span><span class="p">(</span><span class="s">&quot;ThresholdFilter&quot;</span><span class="p">);</span><span class="w">    </span>
<span class="k">auto</span><span class="w"> </span><span class="n">thresholdFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filter</span><span class="o">-&gt;</span><span class="n">as</span><span class="o">&lt;</span><span class="n">ob</span><span class="o">::</span><span class="n">ThresholdFilter</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// set the minimum value to 200 and the maximum value to 5000.</span>
<span class="n">thresholdFilter</span><span class="o">-&gt;</span><span class="n">setValueRange</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">5000</span><span class="p">);</span><span class="w"> </span>
<span class="c1">// get depth frame from frameset.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frameSet</span><span class="o">-&gt;</span><span class="n">getFrame</span><span class="p">(</span><span class="n">OB_FRAME_DEPTH</span><span class="p">);</span>
<span class="c1">// through filtering processing</span>
<span class="k">auto</span><span class="w"> </span><span class="n">newFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thresholdFilter</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">depthFrame</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="camera-depth-working-mode">
<h2><span class="section-number">3.17.15. </span>Camera Depth Working Mode<a class="headerlink" href="#camera-depth-working-mode" title="Link to this heading">ï</a></h2>
<p>âDepth modeâ is short for âcamera depth working modeâ. This mode allows a module to adjust the depth camera for different application scenarios by changing parameters. These scenarios may include high-precision, long-distance, and low-power scenes. Each depth application scenario is independent, and switching between modes does not require a device reboot.</p>
<p>The default depth mode is the current working mode after device startup or reboot. To ensure the correct depth mode is used, it is necessary to switch to the desired mode every time the device starts. Upon initial connection to the device, it is important to verify that the current depth mode matches the target depth mode.</p>
<p>Please note that Gemini2, Gemini2 L, Astra2 cameras have different depth modes. Each Depth mode may have varying power consumption, supported resolutions, frame rates, and effective depth detection ranges. Please refer to the product specifications for specific details.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Check whether the camera depth working mode is supported</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_STRUCT_CURRENT_DEPTH_ALG_MODE</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_READ_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 2.Query the current camera depth mode</span>
<span class="k">auto</span><span class="w"> </span><span class="n">curDepthMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getCurrentDepthWorkMode</span><span class="p">();</span>

<span class="c1">// 3.Get the list of camera depth modes</span>
<span class="k">auto</span><span class="w"> </span><span class="n">depthModeList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getDepthWorkModeList</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">depthModeList</span><span class="o">-&gt;</span><span class="n">getCount</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;depthModeList[&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;]: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">depthModeList</span><span class="p">)[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 4.switch depth work mode to default (index=0) mode, user can switch to ohter mode like this.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">switchDepthWorkMode</span><span class="p">((</span><span class="o">*</span><span class="n">depthModeList</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="disparity-to-depth-d2d">
<h2><span class="section-number">3.17.16. </span>Disparity to Depth (D2D)<a class="headerlink" href="#disparity-to-depth-d2d" title="Link to this heading">ï</a></h2>
<ul>
<li><p>Hardware D2D</p>
<p>Hardware D2D is the internal implementation of Disparity to Depth conversion within the device itself. Before invoking the function, it is necessary to check if the interface property is supported.</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_DISPARITY_TO_DEPTH_BOOL</span><span class="p">,</span> <span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">Parameter</span><span class="p">:</span> <span class="n">true</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">hardware</span> <span class="n">D2D</span><span class="p">,</span><span class="n">false</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">hardware</span> <span class="n">D2D</span>
    <span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_DISPARITY_TO_DEPTH_BOOL</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Software D2D</p></li>
</ul>
<p>Software D2D is the internal implementation of Disparity to Depth conversion within the SDK. Software D2D is supported by all sensor device except for TOF device such as Femto Mega and Femto Bolt. Before invoking the function, it is necessary to check if the interface property is supported.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_SDK_DISPARITY_TO_DEPTH_BOOL</span><span class="p">,</span> <span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">Parameter</span><span class="p">:</span> <span class="n">true</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">software</span> <span class="n">D2D</span><span class="p">,</span><span class="n">false</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">software</span> <span class="n">D2D</span>
    <span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_SDK_DISPARITY_TO_DEPTH_BOOL</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-ir-ae">
<h2><span class="section-number">3.17.17. </span>Set IR AE<a class="headerlink" href="#set-ir-ae" title="Link to this heading">ï</a></h2>
<p>Set the IR for automatic exposure.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-ir-exposure">
<h2><span class="section-number">3.17.18. </span>Set IR Exposure<a class="headerlink" href="#set-ir-exposure" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Exposure settings only take effect when AE is disabled</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Disable AE</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="c1">// Set exposure</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_EXPOSURE_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"> </span>
</pre></div>
</div>
</section>
<section id="set-ir-gain">
<h2><span class="section-number">3.17.19. </span>Set IR Gain<a class="headerlink" href="#set-ir-gain" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Gain settings only take effect when AE is disabled</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Disable AE</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="c1">// Set gain. gain: the specific gain value</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_GAIN_INT</span><span class="p">,</span><span class="w"> </span><span class="n">gain</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-ir-target-brightness">
<h2><span class="section-number">3.17.20. </span>Set IR Target Brightness<a class="headerlink" href="#set-ir-target-brightness" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Used during auto exposure to define the target brightness</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_BRIGHTNESS_INT</span><span class="p">,</span><span class="mi">60</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-ir-maximum-exposure-value">
<h2><span class="section-number">3.17.21. </span>Set IR Maximum Exposure Value<a class="headerlink" href="#set-ir-maximum-exposure-value" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Used during auto exposure to define the max exposure</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set the maximum exposure value to 3ms</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_AE_MAX_EXPOSURE_INT</span><span class="p">,</span><span class="mi">3000</span><span class="p">);</span><span class="w">  </span>
</pre></div>
</div>
</section>
<section id="set-ir-mirror">
<h2><span class="section-number">3.17.22. </span>Set IR Mirror<a class="headerlink" href="#set-ir-mirror" title="Link to this heading">ï</a></h2>
<p>IR mirror refers to horizontally flipping the IR image along its vertical centerline, meaning the pixel positions on the left and right sides of the image are swapped.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_IR_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_READ</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// Obtain the current mirror.</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">isOpen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_MIRROR_BOOL</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_IR_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">isOpen</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-ir-flip">
<h2><span class="section-number">3.17.23. </span>Set IR Flip<a class="headerlink" href="#set-ir-flip" title="Link to this heading">ï</a></h2>
<p>IR Flip means flipping the IR image up and down along the X-axis, that is, swapping the upper and lower parts of the image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_IR_FLIP_BOOL</span><span class="p">,</span> <span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span> <span class="p">{</span>
       <span class="o">//</span> <span class="n">true</span><span class="p">:</span> <span class="n">IR</span> <span class="ow">is</span> <span class="n">flipped</span> <span class="n">up</span> <span class="ow">and</span> <span class="n">down</span><span class="p">;</span> <span class="n">false</span><span class="p">:</span> <span class="n">Does</span> <span class="ow">not</span> <span class="n">flip</span>
    <span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_FLIP_BOOL</span><span class="p">,</span><span class="n">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-ir-rotation">
<h2><span class="section-number">3.17.24. </span>Set IR Rotation<a class="headerlink" href="#set-ir-rotation" title="Link to this heading">ï</a></h2>
<p>IR rotation can be rotated at 0, 90, 180, and 270 degrees. The default rotation is set to 0 degrees.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Rotation</span> <span class="n">parameters</span>
<span class="n">Typedef</span> <span class="n">enum</span> <span class="p">{</span>
    <span class="n">OB_ROTATE_DEGREE_0</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>    <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">0</span>
    <span class="n">OB_ROTATE_DEGREE_90</span>  <span class="o">=</span> <span class="mi">90</span><span class="p">,</span>   <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">90</span>
    <span class="n">OB_ROTATE_DEGREE_180</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span>  <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">180</span>
    <span class="n">OB_ROTATE_DEGREE_270</span> <span class="o">=</span> <span class="mi">270</span><span class="p">,</span>  <span class="o">///&lt;</span> <span class="n">Rotate</span> <span class="mi">270</span>
<span class="p">}</span> <span class="n">ob_rotate_degree_type</span><span class="p">,</span> <span class="n">OBRotateDegreeType</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_IR_ROTATE_INT</span><span class="p">,</span> <span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">rotation</span> <span class="n">angle</span>
    <span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_IR_ROTATE_INT</span><span class="p">,</span> <span class="n">OB_ROTATE_DEGREE_90</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-color-ae">
<h2><span class="section-number">3.17.25. </span>Set Color AE<a class="headerlink" href="#set-color-ae" title="Link to this heading">ï</a></h2>
<p>Set the Color for automatic exposure.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-exposure">
<h2><span class="section-number">3.17.26. </span>Set Color Exposure<a class="headerlink" href="#set-color-exposure" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Set Color exposure, prerequisites, you need to turn off the Color AE</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Disable AE</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="c1">//set exposure</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_EXPOSURE_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"> </span>
</pre></div>
</div>
</section>
<section id="set-color-gain">
<h2><span class="section-number">3.17.27. </span>Set Color Gain<a class="headerlink" href="#set-color-gain" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Set the Color gain and prerequisites. You need to turn off the Color AE</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Disable AE</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_AUTO_EXPOSURE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="c1">//Set color gain. gain: the specific gain value</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_GAIN_INT</span><span class="p">,</span><span class="w"> </span><span class="n">gain</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-mirror">
<h2><span class="section-number">3.17.28. </span>Set Color Mirror<a class="headerlink" href="#set-color-mirror" title="Link to this heading">ï</a></h2>
<p>Color mirror refers to horizontally flipping the Color image along its vertical centerline, meaning the pixel positions on the left and right sides of the image are swapped.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="c1">// Set the Color mirror.</span>
<span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_COLOR_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_READ</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_COLOR_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Parameter: true mirror, false non-mirror</span>
<span class="w">      </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_MIRROR_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-color-flip">
<h2><span class="section-number">3.17.29. </span>Set Color Flip<a class="headerlink" href="#set-color-flip" title="Link to this heading">ï</a></h2>
<p>Color Flip means flipping the Color image up and down along the X-axis, that is, swapping the upper and lower parts of the image.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_COLOR_FLIP_BOOL</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="c1">// true: indicates that the data is flipped up and down. false: indicates that the data is not flipped.</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_FLIP_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-color-rotation">
<h2><span class="section-number">3.17.30. </span>Set Color Rotation<a class="headerlink" href="#set-color-rotation" title="Link to this heading">ï</a></h2>
<p>Color rotation can be rotated at 0, 90, 180, and 270 degrees. The default rotation is set to 0 degrees.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Rotation parameters</span>
<span class="n">Typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">OB_ROTATE_DEGREE_0</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">    </span><span class="c1">///&lt; Rotate 0</span>
<span class="w">    </span><span class="n">OB_ROTATE_DEGREE_90</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w">   </span><span class="c1">///&lt; Rotate 90</span>
<span class="w">    </span><span class="n">OB_ROTATE_DEGREE_180</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">  </span><span class="c1">///&lt; Rotate 180</span>
<span class="w">    </span><span class="n">OB_ROTATE_DEGREE_270</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">270</span><span class="p">,</span><span class="w">  </span><span class="c1">///&lt; Rotate 270</span>
<span class="p">}</span><span class="w"> </span><span class="n">ob_rotate_degree_type</span><span class="p">,</span><span class="w"> </span><span class="n">OBRotateDegreeType</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_COLOR_ROTATE_INT</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Set the rotation angle.</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_ROTATE_INT</span><span class="p">,</span><span class="w"> </span><span class="n">OB_ROTATE_DEGREE_90</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="set-color-automatic-white-balance-awb">
<h2><span class="section-number">3.17.31. </span>Set Color Automatic White Balance (AWB)<a class="headerlink" href="#set-color-automatic-white-balance-awb" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_AUTO_WHITE_BALANCE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-white-balance-parameters">
<h2><span class="section-number">3.17.32. </span>Set Color White Balance Parameters<a class="headerlink" href="#set-color-white-balance-parameters" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>To set the white balance parameter, you must turn off automatic white balance first.</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// First, turn off AWB (Auto White Balance).</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_AUTO_WHITE_BALANCE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_DEPTH_EXPOSURE_INT</span><span class="p">,</span><span class="w"> </span><span class="n">colorWhiteBalance</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-the-color-brightness">
<h2><span class="section-number">3.17.33. </span>Set the Color Brightness<a class="headerlink" href="#set-the-color-brightness" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_BRIGHTNESS_INT</span><span class="p">,</span><span class="w"> </span><span class="n">brightness</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-sharpness">
<h2><span class="section-number">3.17.34. </span>Set Color Sharpness<a class="headerlink" href="#set-color-sharpness" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_SHARPNESS_INT</span><span class="p">,</span><span class="w"> </span><span class="n">sharpness</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-gamma">
<h2><span class="section-number">3.17.35. </span>Set Color Gamma<a class="headerlink" href="#set-color-gamma" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_GAMMA_INT</span><span class="p">,</span><span class="w"> </span><span class="n">gamma</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-saturation">
<h2><span class="section-number">3.17.36. </span>Set Color Saturation<a class="headerlink" href="#set-color-saturation" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_SATURATION_INT</span><span class="p">,</span><span class="w"> </span><span class="n">saturation</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-hue">
<h2><span class="section-number">3.17.37. </span>Set Color Hue<a class="headerlink" href="#set-color-hue" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_HUE_INT</span><span class="p">,</span><span class="w"> </span><span class="n">hue</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-auto-exposure-priority">
<h2><span class="section-number">3.17.38. </span>Set Color Auto Exposure Priority<a class="headerlink" href="#set-color-auto-exposure-priority" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_AUTO_EXPOSURE_PRIORITY_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-backlight-compensation">
<h2><span class="section-number">3.17.39. </span>Set Color Backlight Compensation<a class="headerlink" href="#set-color-backlight-compensation" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_BACKLIGHT_COMPENSATION_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-contrast">
<h2><span class="section-number">3.17.40. </span>Set Color Contrast<a class="headerlink" href="#set-color-contrast" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_CONTRAST_INT</span><span class="p">,</span><span class="w"> </span><span class="n">contrast</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="set-color-power-line-frequency">
<h2><span class="section-number">3.17.41. </span>Set Color power line frequency<a class="headerlink" href="#set-color-power-line-frequency" title="Link to this heading">ï</a></h2>
<p>It is necessary to set 50Hz or 60Hz according to the power line frequency of different countries and regions. The purpose of setting the power supply frequency is to prevent Color images from flickering.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">OB_POWER_LINE_FREQ_MODE_CLOSE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">  </span><span class="c1">///&lt; Close</span>
<span class="w">    </span><span class="n">OB_POWER_LINE_FREQ_MODE_50HZ</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="c1">///&lt; 50Hz</span>
<span class="w">    </span><span class="n">OB_POWER_LINE_FREQ_MODE_60HZ</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">  </span><span class="c1">///&lt; 60Hz</span>
<span class="p">}</span><span class="w"> </span><span class="n">ob_power_line_freq_mode</span><span class="p">,</span>
<span class="n">OBPowerLineFreqMode</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isPropertySupported</span><span class="p">(</span><span class="n">OB_PROP_COLOR_POWER_LINE_FREQUENCY_INT</span><span class="p">,</span><span class="w"> </span><span class="n">OB_PERMISSION_WRITE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">powerFreq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OB_POWER_LINE_FREQ_MODE_50HZ</span><span class="p">;</span>
<span class="w">            </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_COLOR_BRIGHTNESS_INT</span><span class="p">,</span><span class="w"> </span><span class="n">powerFreq</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="ldp-switch">
<h2><span class="section-number">3.17.42. </span>LDP Switch<a class="headerlink" href="#ldp-switch" title="Link to this heading">ï</a></h2>
<p>The LDP (Laser Distance Protection) module is capable of detecting objects in close proximity. When LDP is enabled, the system detects obstacles within the specified distance range of the camera and gradually reduces the laser power level until the laser is switched off, ensuring laser protection. This functionality is disabled when LDP is disabled.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_LDP_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="obtain-ldp-measurement-value">
<h2><span class="section-number">3.17.43. </span>Obtain LDP Measurement Value<a class="headerlink" href="#obtain-ldp-measurement-value" title="Link to this heading">ï</a></h2>
<p>To obtain the LDP (Laser Distance Protection) measurement values when the LDP switch is enabled.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getIntProperty</span><span class="p">(</span><span class="n">OB_PROP_LDP_MEASURE_DISTANCE_INT</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="obtain-ldp-protection-status">
<h2><span class="section-number">3.17.44. </span>Obtain LDP Protection Status<a class="headerlink" href="#obtain-ldp-protection-status" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_LDP_STATUS_BOOL</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="laser-switch">
<h2><span class="section-number">3.17.45. </span>Laser Switch<a class="headerlink" href="#laser-switch" title="Link to this heading">ï</a></h2>
<p>The command to turn the laser on or off for the Gemini 330 is as followsï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//Gemini 330 series Laser control, 0: off, 1: on, 2: auto</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_LASER_CONTROL_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>For devices other than the Gemini 330, the command to turn the laser on or off is as followsï¼</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_LASER_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="laser-on-off">
<h2><span class="section-number">3.17.46. </span>Laser On-Off<a class="headerlink" href="#laser-on-off" title="Link to this heading">ï</a></h2>
<p>Currently, only the Gemini 330 series supports this feature (requires firmware version v1.4.00 or above) and requires Orbbec SDK version v2.1.1 or above</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// load frame interleave mode as &#39;Laser On-Off&#39;</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">loadFrameInterleave</span><span class="p">(</span><span class="s">&quot;Laser On-Off&quot;</span><span class="p">);</span>
<span class="c1">// enable frame interleave</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_FRAME_INTERLEAVE_ENABLE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<p>The detailed implementation can be found in the <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/3.advanced.laser_interleave">SDK example</a></p>
</section>
<section id="hdr-merge">
<h2><span class="section-number">3.17.47. </span>HDRÂ Merge<a class="headerlink" href="#hdr-merge" title="Link to this heading">ï</a></h2>
<p>Currently, only the Gemini 330 series supports,The detailed implementation can be found in the <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/3.advanced.hdr">SDK example</a>ã</p>
<p>The key API is as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// 1.Create HDRMerge filter</span>
<span class="k">auto</span><span class="w"> </span><span class="n">hdrMerge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ob</span><span class="o">::</span><span class="n">FilterFactory</span><span class="o">::</span><span class="n">createFilter</span><span class="p">(</span><span class="s">&quot;HDRMerge&quot;</span><span class="p">);</span>
<span class="c1">// 2.Set related parameters</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">isFrameInterleaveSupported</span><span class="p">()</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Supported by firmware version v1400 and above</span>
<span class="w">    </span><span class="c1">// load frame interleave mode as &#39;Depth from HDR&#39;</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">loadFrameInterleave</span><span class="p">(</span><span class="s">&quot;Depth from HDR&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// enable frame interleave mode</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_FRAME_INTERLEAVE_ENABLE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// configure and enable Hdr stream</span>
<span class="w">    </span><span class="n">OBHdrConfig</span><span class="w"> </span><span class="n">obHdrConfig</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// enable HDR merge</span>
<span class="w">    </span><span class="n">obHdrConfig</span><span class="p">.</span><span class="n">enable</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">obHdrConfig</span><span class="p">.</span><span class="n">exposure_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7500</span><span class="p">;</span>
<span class="w">    </span><span class="n">obHdrConfig</span><span class="p">.</span><span class="n">gain_1</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span>
<span class="w">    </span><span class="n">obHdrConfig</span><span class="p">.</span><span class="n">exposure_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="w">    </span><span class="n">obHdrConfig</span><span class="p">.</span><span class="n">gain_2</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
<span class="w">    </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setStructuredData</span><span class="p">(</span><span class="n">OB_STRUCT_DEPTH_HDR_CONFIG</span><span class="p">,</span><span class="w"> </span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obHdrConfig</span><span class="p">),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">OBHdrConfig</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">//3. Get framesetï¼use HDRMerge filter to merge hdr frames</span>
<span class="k">auto</span><span class="w"> </span><span class="n">frameSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pipe</span><span class="p">.</span><span class="n">waitForFrameset</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hdrMerge</span><span class="o">-&gt;</span><span class="n">process</span><span class="p">(</span><span class="n">frameSet</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="obtain-metadata">
<h2><span class="section-number">3.17.48. </span>Obtain MetaData<a class="headerlink" href="#obtain-metadata" title="Link to this heading">ï</a></h2>
<p>MetaData can be obtained from the returned ob::Frame objects. Supported frame types include depth, leftIR, rightIR, and color.</p>
<p>The key API is as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// The interfaces provided by ob::Frame can correspond to specific ob::Frame types, such as depth, leftIR, rightIR, and color.</span>

<span class="c1">// Determine whether the specified OBFrameMetadataType exists.</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">hasMetadata</span><span class="p">(</span><span class="n">OBFrameMetadataType</span><span class="w"> </span><span class="n">type</span><span class="p">);</span>
<span class="c1">// Get the type value of the specified OBFrameMetadataType.</span>
<span class="kt">int64_t</span><span class="w"> </span><span class="nf">getMetadataValue</span><span class="p">(</span><span class="n">OBFrameMetadataType</span><span class="w"> </span><span class="n">type</span><span class="p">);</span>

<span class="c1">// The OBFrameMetadataType types are as follows.</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Timestamp when the frame is captured.</span>
<span class="cm">     * @attention Different device models may have different units. It is recommended to use the timestamp related functions to get the timestamp in the</span>
<span class="cm">     * correct units.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_TIMESTAMP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Timestamp in the middle of the capture.</span>
<span class="cm">     * @brief Usually is the middle of the exposure time.</span>
<span class="cm">     * @attention Different device models may have different units.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_SENSOR_TIMESTAMP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief The number of current frame.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_FRAME_NUMBER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Auto exposure status</span>
<span class="cm">     * @brief If the value is 0, it means the auto exposure is disabled. Otherwise, it means the auto exposure is enabled.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_AUTO_EXPOSURE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Exposure time</span>
<span class="cm">     * @attention Different sensor may have different units. Usually, it is 100us for color sensor and 1us for depth/infrared sensor.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_EXPOSURE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Gain</span>
<span class="cm">     * @attention For some device models, the gain value represents the gain level, not the multiplier.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_GAIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Auto white balance status</span>
<span class="cm">     * @brief If the value is 0, it means the auto white balance is disabled. Otherwise, it means the auto white balance is enabled.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_AUTO_WHITE_BALANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief White balance</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_WHITE_BALANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Brightness</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_BRIGHTNESS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Contrast</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_CONTRAST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Saturation</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_SATURATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Sharpness</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_SHARPNESS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Backlight compensation</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_BACKLIGHT_COMPENSATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Hue</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_HUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Gamma</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_GAMMA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Power line frequency</span>
<span class="cm">     * @brief For anti-flickering, 0: Close, 1: 50Hz, 2: 60Hz, 3: Auto</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_POWER_LINE_FREQUENCY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Low light compensation</span>
<span class="cm">     * @attention The low light compensation is a feature inside the device, and can not manually control it.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_LOW_LIGHT_COMPENSATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Manual white balance setting</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_MANUAL_WHITE_BALANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Actual frame rate</span>
<span class="cm">     * @brief The actual frame rate will be calculated according to the exposure time and other parameters.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_ACTUAL_FRAME_RATE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Frame rate</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_FRAME_RATE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Left region of interest for the auto exposure Algorithm.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_AE_ROI_LEFT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Top region of interest for the auto exposure Algorithm.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_AE_ROI_TOP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Right region of interest for the auto exposure Algorithm.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_AE_ROI_RIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Bottom region of interest for the auto exposure Algorithm.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_AE_ROI_BOTTOM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Exposure priority</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_EXPOSURE_PRIORITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief HDR sequence name</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_HDR_SEQUENCE_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief HDR sequence size</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_HDR_SEQUENCE_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief HDR sequence index</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_HDR_SEQUENCE_INDEX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Laser power value in mW</span>
<span class="cm">     * @attention The laser power value is an approximate estimation.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_LASER_POWER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Laser power level</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_LASER_POWER_LEVEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Laser status</span>
<span class="cm">     * @brief 0: Laser off, 1: Laser on</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_LASER_STATUS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief GPIO input data</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_GPIO_INPUT_DATA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief disparity search offset value</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_DISPARITY_SEARCH_OFFSET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief disparity search range</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_DISPARITY_SEARCH_RANGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief The number of frame metadata types, using for types iterating</span>
<span class="cm">     * @attention It is not a valid frame metadata type</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">OB_FRAME_METADATA_TYPE_COUNT</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="n">ob_frame_metadata_type</span><span class="p">,</span><span class="w"> </span><span class="n">OBFrameMetadataType</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>how to get the exposure value from MetaData in an ob::Frame. Other MetaData fields can be accessed in a similar way.</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">hasMetadata</span><span class="p">(</span><span class="n">OB_FRAME_METADATA_TYPE_EXPOSURE</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">exp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getMetadataValue</span><span class="p">(</span><span class="n">OB_FRAME_METADATA_TYPE_EXPOSURE</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="triggered-capture">
<h2><span class="section-number">3.17.49. </span>Triggered Capture<a class="headerlink" href="#triggered-capture" title="Link to this heading">ï</a></h2>
<section id="software-triggered-capture">
<h3><span class="section-number">3.17.49.1. </span>Software Triggered Capture<a class="headerlink" href="#software-triggered-capture" title="Link to this heading">ï</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// First, configure the device to software trigger mode through the Device.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">curConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getMultiDeviceSyncConfig</span><span class="p">();</span>
<span class="n">curConfig</span><span class="p">.</span><span class="n">syncMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OB_MULTI_DEVICE_SYNC_MODE_SOFTWARE_TRIGGERING</span><span class="p">;</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setMultiDeviceSyncConfig</span><span class="p">(</span><span class="n">curConfig</span><span class="p">);</span>

<span class="c1">// Finally, after starting the video stream, capture the data stream through the interface provided by the Device.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">triggerCapture</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="timed-capture">
<h3><span class="section-number">3.17.49.2. </span>Timed Capture<a class="headerlink" href="#timed-capture" title="Link to this heading">ï</a></h3>
<ul class="simple">
<li><p>For Gemini 2/Gemini 2 L and early versions of the Gemini 330 series firmware, timed capture must be implemented by the user in the application. The user needs to create a separate thread to periodically trigger the software capture.</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// First, configure the device to software trigger mode through the Device.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">curConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">device</span><span class="o">-&gt;</span><span class="n">getMultiDeviceSyncConfig</span><span class="p">();</span>
<span class="n">curConfig</span><span class="p">.</span><span class="n">syncMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OB_MULTI_DEVICE_SYNC_MODE_SOFTWARE_TRIGGERING</span><span class="p">;</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setMultiDeviceSyncConfig</span><span class="p">(</span><span class="n">curConfig</span><span class="p">);</span>

<span class="c1">// Finally, after the video stream is started, a thread is created to periodically trigger via the interface provided by the Device.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">triggerCapture</span><span class="p">();</span>
</pre></div>
</div>
<ul class="simple">
<li><p>For the Gemini 330 series with firmware version v1.5.10 or above, and using OrbbecSDK version v2.2.12 or above, the firmware already supports built-in timed capture functionality. Therefore, the SDK provides two new interfaces: one to enable timed capture, and the other to set the capture interval on the firmware side. You no longer need to create a thread to manually trigger capture.</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Enable automatic snapshot by setting it to true: automatic snapshot, set it to false: manual snapshot.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_DEVICE_AUTO_CAPTURE_ENABLE_BOOL</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="c1">// Set the automatic snapshot interval, unit: ms</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_DEVICE_AUTO_CAPTURE_INTERVAL_TIME_INT</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">);</span><span class="w">  </span>
</pre></div>
</div>
</section>
</section>
<section id="timestamp-reset">
<h2><span class="section-number">3.17.50. </span>Timestamp Reset<a class="headerlink" href="#timestamp-reset" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Timestamp Reset Command</p></li>
</ul>
<p>This command is used in multi-device synchronization scenarios and only needs to be sent to the master device. Resetting the timestamp on the master device is sufficient, as it can be configured to output a reset signal to reset the slave devices.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_TIMER_RESET_SIGNAL_BOOL</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>TimeStamp Reset Trigger Out enable</p></li>
</ul>
<p>Enabling this option allows the timestamp reset signal to be sent to slave devices for resetting.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// true: Indicates that the trigger signal is sent externally; false: Indicates that the trigger signal is not sent externally.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_TIMER_RESET_TRIGGER_OUT_ENABLE_BOOL</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Reset Signal Delay</p></li>
</ul>
<p>Defines how long to delay the reset after receiving the trigger signal. This can be used in master-slave sync scenarios to avoid laser interference.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// The delay time is in microseconds (us), for example, setting it to 20 means 20 microseconds.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setIntProperty</span><span class="p">(</span><span class="n">OB_PROP_TIMER_RESET_DELAY_US_INT</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Enable Timestamp Reset</p></li>
</ul>
<p>For Gemini 330 series and Gemini 2 series devices, you can directly use the above three interfaces without calling an additional enable command.
However, for Femto Mega series devices, you must first call the timestamp reset enable interface before using the timestamp reset functionality and the three interfaces above.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// true: Indicates that the timestamp reset function is enabled.</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setBoolProperty</span><span class="p">(</span><span class="n">OB_PROP_TIMER_RESET_ENABLE_BOOL</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="device-time-synchronization">
<h2><span class="section-number">3.17.51. </span>Device Time Synchronization<a class="headerlink" href="#device-time-synchronization" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>To synchronize multiple devices, the parameter ârepeatIntervalâ represents the synchronization interval in milliseconds (ms). For example, to synchronize every half hour, the repeatInterval would be set to 30 * 60 * 1000 (ms).</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">context</span><span class="o">-&gt;</span><span class="n">enableDeviceClockSync</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">repeatInterval</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To synchronize a single device, you would need to periodically invoke a time synchronization function, such as calling it once every 60 minutes.</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">timerSyncWithHost</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="device-reboot">
<h2><span class="section-number">3.17.52. </span>Device Reboot<a class="headerlink" href="#device-reboot" title="Link to this heading">ï</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">-&gt;</span><span class="n">reboot</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="network-device-ip-address-modification-settings">
<h2><span class="section-number">3.17.53. </span>Network Device IP Address Modification Settings<a class="headerlink" href="#network-device-ip-address-modification-settings" title="Link to this heading">ï</a></h2>
<ul class="simple">
<li><p>Set network camera configuration parameters â only supported by network devices such as the Gemini 335Le and Femto Mega Series.</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief DHCP status</span>
<span class="cm">     * @note 0: static IP; 1: DHCP</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">dhcp</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief IP address (IPv4, big endian: 192.168.1.10, address[0] = 192, address[1] = 168, address[2] = 1, address[3] = 10)</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">address</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Subnet mask (big endian)</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">mask</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @brief Gateway (big endian)</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">gateway</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span><span class="w"> </span><span class="n">OBNetIpConfig</span><span class="p">,</span><span class="w"> </span><span class="n">ob_net_ip_config</span><span class="p">,</span><span class="w"> </span><span class="n">DEVICE_IP_ADDR_CONFIG</span><span class="p">;</span>

<span class="c1">//Set the network parameters. A restart of the device is required after success. </span>
<span class="n">OBNetIpConfig</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>
<span class="n">device</span><span class="o">-&gt;</span><span class="n">setStructuredData</span><span class="p">(</span><span class="n">OB_STRUCT_DEVICE_IP_ADDR_CONFIG</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">OBNetIpConfig</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="multi-device-synchronization">
<h2><span class="section-number">3.17.54. </span>Multi-device Synchronization<a class="headerlink" href="#multi-device-synchronization" title="Link to this heading">ï</a></h2>
<p>For more information about multi-device synchronization, see the <a class="reference external" href="https://www.orbbec.com/docs-general/set-up-cameras-for-external-synchronization_v1-2/">multi-device synchronization documentation</a>.</p>
<section id="usb-and-network-device">
<h3><span class="section-number">3.17.54.1. </span>USB and Network Device<a class="headerlink" href="#usb-and-network-device" title="Link to this heading">ï</a></h3>
<p>For multi-device synchronization with USB and network devices, please refer to the <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/3.advanced.multi_devices_sync">multi devices sync</a> and <a class="reference external" href="https://www.orbbec.com/docs-general/set-up-cameras-for-external-synchronization_v1-2/">multi-device synchronization documentation</a>.</p>
</section>
<section id="gmsl-device">
<h3><span class="section-number">3.17.54.2. </span>GMSL device<a class="headerlink" href="#gmsl-device" title="Link to this heading">ï</a></h3>
<p>GMSL Multi devices Sync please referÂ this document,There are two usage methods:</p>
<ul class="simple">
<li><p>The first is to set all devices as OB_MULTI_DEVICE_SYNC_MODE_SECONDARY mode and synchronize them through PWM triggering.</p></li>
<li><p>The second is to set all devices as OB_MULTI_DEVICE_SYNC_MODE_HARDWARE_TRIGGERING mode and synchronize them through PWM triggering.</p></li>
</ul>
<p>PWM triggering please refer <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/3.advanced.multi_devices_sync_gmsltrigger">ob_multi_devices_sync_gmsltrigger sample</a>.</p>
<p>Multi devices sync please refer <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/tree/main/examples/3.advanced.multi_devices_sync">ob_multi_devices_sync sample</a></p>
<ul class="simple">
<li><p>Notes: To make the multi devices sync sample simple and versatile, the PWM trigger has been separated into its own sample. GMSL2/FAKRA requires running two samples for testing. If you are developing your own application, you can combine these two functionalities into a single application.</p></li>
</ul>
<p><strong>How to test multi devices sync using C++ sample</strong></p>
<section id="build">
<h4><span class="section-number">3.17.54.2.1. </span>Build<a class="headerlink" href="#build" title="Link to this heading">ï</a></h4>
<ol class="simple">
<li><p>Extract the OrbbecSDK sample package <a class="reference external" href="https://github.com/orbbec/OrbbecSDK_v2/releases">OrbbecSDK_v2.x.x_xxxxxxxx_linux_aarch64.zip</a> to the current directory</p></li>
<li><p>Open a terminal and run cd to enter the extracted directory</p></li>
<li><p>Run the setup script to build and configure the environment: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">./setup.sh</span></code></p></li>
</ol>
</section>
<section id="multi-devices-sync-configuration">
<h4><span class="section-number">3.17.54.2.2. </span>Multi-devices sync configuration<a class="headerlink" href="#multi-devices-sync-configuration" title="Link to this heading">ï</a></h4>
<p>Using two Gemini 335Lg device as an example, the MultiDeviceSyncConfig.json is as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;configTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2025/05/23&quot;</span><span class="p">,</span>
    <span class="s2">&quot;devices&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;sn&quot;</span><span class="p">:</span> <span class="s2">&quot;CP4H74D0000Z&quot;</span><span class="p">,</span>
            <span class="s2">&quot;syncConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;syncMode&quot;</span><span class="p">:</span> <span class="s2">&quot;OB_MULTI_DEVICE_SYNC_MODE_SECONDARY&quot;</span><span class="p">,</span>
                <span class="s2">&quot;depthDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;colorDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;trigger2ImageDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;triggerOutEnable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                <span class="s2">&quot;triggerOutDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;framesPerTrigger&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;sn&quot;</span><span class="p">:</span> <span class="s2">&quot;CP4H74D0004K&quot;</span><span class="p">,</span>
            <span class="s2">&quot;syncConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;syncMode&quot;</span><span class="p">:</span> <span class="s2">&quot;OB_MULTI_DEVICE_SYNC_MODE_SECONDARY&quot;</span><span class="p">,</span>
                <span class="s2">&quot;depthDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;colorDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;trigger2ImageDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;triggerOutEnable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                <span class="s2">&quot;triggerOutDelayUs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;framesPerTrigger&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>sn: Replace with the actual serial number of the device.</p></li>
<li><p>syncMode: Can be set to either OB_MULTI_DEVICE_SYNC_MODE_SECONDARY or OB_MULTI_DEVICE_SYNC_MODE_HARDWARE_TRIGGERING.</p></li>
</ul>
<p>The differences between the two sync modes are as follows:</p>
<ul class="simple">
<li><p>OB_MULTI_DEVICE_SYNC_MODE_SECONDARY: Sets the device to secondary mode. In this mode, the PWM trigger frame rate must match the actual streaming frame rate. For example, if the streaming frame rate is 30 fps, the PWM frame rate must also be set to 30</p></li>
<li><p>OB_MULTI_DEVICE_SYNC_MODE_HARDWARE_TRIGGERING: Sets the device to hardware triggering mode. In this mode, the PWM trigger signal must not exceed half of the streaming frame rate. For example, if the streaming frame rate is set to 30 fps, and the PWM trigger signal exceeds 15, the camera will still only capture images at 15 fps. In other words, when the streaming frame rate is 30 fps, the valid range for the PWM trigger signal is 1 to 15 fps.</p></li>
</ul>
<p><strong>1. Open the first terminal and run the multi-devices sync sample</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```cpp
$ ./ob_multi_devices_sync

--------------------------------------------------
Please select options: 
 0 --&gt; config devices sync mode. 
 1 --&gt; start stream 
--------------------------------------------------
Please select input: 0
</pre></div>
</div>
<p><strong>2. Open the second terminal and run the sample that sends PWM trigger signals with administrator privileges</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>orbbec@agx:~/SensorSDK/build/install/Example/bin$ sudo ./ob_multi_devices_sync_gmsltrigger
Please select options: 
------------------------------------------------------------
 0 --&gt; config GMSL SOC hardware trigger Source. Set trigger fps: 
 1 --&gt; start Trigger 
 2 --&gt; stop Trigger 
 3 --&gt; exit 
------------------------------------------------------------
input select item: 0

Enter FPS (frames per second) (for example: 3000): 3000
Setting FPS to 3000...
Please select options: 
------------------------------------------------------------
 0 --&gt; config GMSL SOC hardware trigger Source. Set trigger fps: 
 1 --&gt; start Trigger 
 2 --&gt; stop Trigger 
 3 --&gt; exit 
------------------------------------------------------------
input select item: 1
</pre></div>
</div>
<p>Notes:
Enter FPS (frames per second) (for example: 3000): 3000(3000 indicates 30 fps) .</p>
</section>
<section id="test-results">
<h4><span class="section-number">3.17.54.2.3. </span>Test Results<a class="headerlink" href="#test-results" title="Link to this heading">ï</a></h4>
<p>Observe the timestamps. As shown in the figure below, the device timestamps of the two devices are identical, indicating that the two devices are successfully synchronized.
<img alt="image" src="../../_images/Multi_Device_Sync.png" /></p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Application_Guide.html" class="btn btn-neutral float-left" title="3. Application Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../license.html" class="btn btn-neutral float-right" title="4. License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-2025,Orbbec Inc. All Rights Reserved.
      <span class="lastupdated">Last updated on 2025-07-14 20:20:42.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>